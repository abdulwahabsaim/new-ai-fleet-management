<%- include('../partials/header') %>

<div class="container-fluid">
    <h1 class="mt-4 mb-4">Edit Vehicle</h1>
    <%- include('../partials/flash_messages') %>

    <div class="card shadow-sm">
        <div class="card-header">
            Editing: <%= vehicle.make %> <%= vehicle.model %>
        </div>
        <div class="card-body p-4">
            <form action="/vehicles/<%= vehicle._id %>?_method=PUT" method="POST">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="make" class="form-label">Make</label>
                        <input type="text" class="form-control" id="make" name="make" value="<%= vehicle.make %>" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="model" class="form-label">Model</label>
                        <input type="text" class="form-control" id="model" name="model" value="<%= vehicle.model %>" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="year" class="form-label">Year</label>
                        <input type="number" class="form-control" id="year" name="year" value="<%= vehicle.year %>" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="vin" class="form-label">VIN</label>
                        <input type="text" class="form-control" id="vin" name="vin" value="<%= vehicle.vin %>" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="licensePlate" class="form-label">License Plate</label>
                        <input type="text" class="form-control" id="licensePlate" name="licensePlate" value="<%= vehicle.licensePlate %>" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="type" class="form-label">Vehicle Type</label>
                        <select class="form-select" id="type" name="type" required>
                            <option value="sedan" <%= vehicle.type === 'sedan' ? 'selected' : '' %>>Sedan</option>
                            <option value="truck" <%= vehicle.type === 'truck' ? 'selected' : '' %>>Truck</option>
                            <option value="van" <%= vehicle.type === 'van' ? 'selected' : '' %>>Van</option>
                            <option value="suv" <%= vehicle.type === 'suv' ? 'selected' : '' %>>SUV</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="mileage" class="form-label">Current Mileage (km)</label>
                        <input type="number" class="form-control" id="mileage" name="mileage" value="<%= vehicle.mileage %>" required>
                    </div>
                </div>
                <div class="row">
                     <div class="col-md-4 mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-select" id="status" name="status" required>
                            <option value="active" <%= vehicle.status === 'active' ? 'selected' : '' %>>Active</option>
                            <option value="in_maintenance" <%= vehicle.status === 'in_maintenance' ? 'selected' : '' %>>In Maintenance</option>
                            <option value="inactive" <%= vehicle.status === 'inactive' ? 'selected' : '' %>>Inactive</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Save Changes</button>
                <a href="/vehicles/<%= vehicle._id %>" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>